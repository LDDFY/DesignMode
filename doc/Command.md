### 命令模式
#### 概述
> 在软件系统中，“行为请求者”与“行为实现者”通常呈现一种“紧耦合”。但在某些场合，比如要对行为进行“记录、撤销/重做、事务”等处理，这种无法抵御变化的紧耦合是不合适的。在这种情况下，如何将“行为请求者”与“行为实现者”解耦？将一组行为抽象为对象，实现二者之间的松耦合。这就是命令模式（Command Pattern）

### 涉及角色
1. 命令角色（Command）：声明一个给所有命令类的抽象接口。
2. 具体命令角色(ConcreteCommand)：定义一个接收者和行为之间的弱耦合；实现execute()方法，负责调用接收者的相应操作。execute()方法叫做执行方法。
3. 客户端角色（Client）：创建一个具体命令（ConcreteCommand）对象并确定其接收者。
4. 请求者角色（Invoker)：负责调用命令对象执行请求，相关的方法叫做行动方法。
5. 接收者角色（Receiver）：负责具体实施和执行一个请求。任何一个类都可以称为接收者，实施和执行请求的方法叫做行动方法。

### 优缺点
#### 优点
1. 降低对象之间的耦合度。
2. 新的命令可以很容易地加入到系统中。
3. 可以比较容易地设计一个组合命令。
4. 调用同一方法实现不同的功能

#### 缺点
1. 使用命令模式可能会导致某些系统有过多的具体命令类。因为针对每一个命令都需要设计一个具体命令类，因此某些系统可能需要大量具体命令类，这将影响命令模式的使用。

### 适用场景
1. 使用命令模式作为CallBack在面向对象系统中的替代。CallBack讲的便是先将一个函数等级上，然后在以后调用此函数。
2. 需要在不同的时间指定请求、将请求排队。一个命令对象和原先的请求发出者可以有不同的生命期。换言之，原先的请求发出者可能已经不存在了，而名对象本身仍然是活动的。这时命令的接受者可以是在本地，也可以在网络的另外一个地址。命令对象可以在串行化之后送到一台机器上去。
3. 系统需要支持命令的撤销（undo）。命令对象可以把状态存储起来，等到客户端需要撤销命令所产生的效果时，可以调用undo()方法，把命令所产生的效果撤销掉。命令对象还可以提供redo()方法，以供客户端在需要时，再重新实施命令效果。
4. 日志请求（系统恢复）：如果一个系统要将系统中所有的数据更新到日志里，以便在系统崩溃时，可以根据日志里读回所有的数据更新命令，重新调用Execute()方法一条一条执行这些命令，从而恢复系统在崩溃前所做的数据更新。
工作队列，线程池，日程安排。
 
### JDK应用
1. java.lang.Runnable

### 示例代码
[命令模式-基础](../src/command/base/CommandTest.java)
[命令模式-宏](../src/command/marco/MacroCommandTest.java)


